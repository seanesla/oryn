@import "tailwindcss";

:root {
  color-scheme: dark;

  --bg: #0a0c11;
  --fg: #f0f3fb;
  --muted: #121720;
  --muted-fg: #a9b3c7;
  --card: #111722;
  --card-2: #0f141f;
  --surface-1: #10151f;
  --surface-2: #0e131d;
  --surface-3: #0c1018;
  --border: #232c3d;
  --border-soft: #1c2433;
  --border-strong: #2d3850;

  --accent: #7e9cff;
  --accent-2: #8edac8;
  --good: #8edac8;
  --warn: #d8b57f;
  --bad: #f198ab;
  --ring: #7e9cff;

  --radius-sm: 0.56rem;
  --radius-lg: 0.92rem;

  --shadow-ambient: 0 10px 30px -26px rgba(0, 0, 0, 0.84);
  --shadow-soft: 0 16px 52px -36px rgba(0, 0, 0, 0.92);
  --shadow-elevated: 0 30px 72px -48px rgba(0, 0, 0, 0.98);
  --shadow-glow: 0 0 0 1px color-mix(in oklab, var(--accent) 26%, transparent),
    0 14px 36px -26px color-mix(in oklab, var(--accent) 40%, transparent);
  --shadow-focus: 0 0 0 1px color-mix(in oklab, var(--accent) 35%, transparent),
    0 0 0 4px color-mix(in oklab, var(--accent) 18%, transparent);
}

@theme inline {
  --color-bg: var(--bg);
  --color-fg: var(--fg);
  --color-muted: var(--muted);
  --color-muted-fg: var(--muted-fg);
  --color-card: var(--card);
  --color-card-2: var(--card-2);
  --color-border: var(--border);
  --color-accent: var(--accent);
  --color-accent-2: var(--accent-2);
  --color-good: var(--good);
  --color-warn: var(--warn);
  --color-bad: var(--bad);
  --color-ring: var(--ring);
  --font-sans: var(--font-app-sans);
  --font-serif: var(--font-app-serif);
}

@supports (color: oklch(8% 0.01 60)) {
  :root {
    --bg: oklch(14% 0.015 258);
    --fg: oklch(95% 0.01 260);
    --muted: oklch(19% 0.018 258);
    --muted-fg: oklch(77% 0.03 257);
    --card: oklch(20% 0.02 258);
    --card-2: oklch(18% 0.018 258);
    --surface-1: oklch(21% 0.018 258);
    --surface-2: oklch(19% 0.018 258);
    --surface-3: oklch(17% 0.016 258);
    --border: oklch(31% 0.028 257);
    --border-soft: oklch(27% 0.022 257);
    --border-strong: oklch(37% 0.036 257);

    --accent: oklch(71% 0.16 269);
    --accent-2: oklch(80% 0.09 185);
    --good: oklch(80% 0.09 185);
    --warn: oklch(80% 0.09 85);
    --bad: oklch(73% 0.12 14);
    --ring: oklch(71% 0.16 269);
  }
}

* {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--font-app-sans), ui-sans-serif, system-ui, -apple-system,
    BlinkMacSystemFont, "Segoe UI", sans-serif;
  overflow-x: hidden;
  text-rendering: optimizeLegibility;
}

::selection {
  background: color-mix(in oklab, var(--accent) 32%, transparent);
}

.app-bg {
  position: relative;
  min-height: 100vh;
  isolation: isolate;
}

.app-bg-layer {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}

/* Landing: keep the galaxy only in the first viewport (hero).
   The rest of the landing page scrolls over a solid background. */
.app-bg-layer-landing {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: auto;
  height: 100vh;
}

/* Landing: a slightly smoother feel for any programmatic scroll (anchors). */
html.landing-smooth {
  scroll-behavior: smooth;
}

.landing-scene {
  min-height: 100vh;
  position: relative;
}

/* Opaque scene background so the fixed galaxy does NOT show through. */
.landing-scene-solid {
  background:
    radial-gradient(120% 120% at 10% 0%, color-mix(in oklab, var(--accent) 8%, transparent), transparent 60%),
    radial-gradient(120% 120% at 92% 12%, color-mix(in oklab, var(--accent-2) 7%, transparent), transparent 58%),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 70%, var(--bg)) 100%);
}

.landing-scene-solid::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 1px;
  background:
    linear-gradient(to right, transparent 0%, color-mix(in oklab, var(--accent) 38%, transparent) 18%, color-mix(in oklab, var(--accent-2) 28%, transparent) 50%, color-mix(in oklab, var(--accent) 38%, transparent) 82%, transparent 100%);
  opacity: 0.9;
  pointer-events: none;
}

.landing-scene-solid::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 1px;
  background:
    linear-gradient(to right, transparent 0%, color-mix(in oklab, var(--accent) 22%, transparent) 18%, color-mix(in oklab, var(--accent-2) 18%, transparent) 50%, color-mix(in oklab, var(--accent) 22%, transparent) 82%, transparent 100%);
  opacity: 0.7;
  pointer-events: none;
}

/* Landing: section-to-section variety (keeps the page from feeling templated). */
.landing-scene-intro {
  background:
    radial-gradient(140% 120% at 16% 0%, color-mix(in oklab, var(--accent) 12%, transparent), transparent 60%),
    radial-gradient(120% 120% at 90% 22%, color-mix(in oklab, var(--accent-2) 10%, transparent), transparent 62%),
    radial-gradient(90% 70% at 50% 110%, color-mix(in oklab, var(--accent) 8%, transparent), transparent 72%),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 72%, var(--bg)) 100%);
}

.landing-scene-feature-live {
  background:
    radial-gradient(130% 120% at 10% 10%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 62%),
    repeating-linear-gradient(
      to right,
      color-mix(in oklab, var(--accent) 6%, transparent) 0,
      color-mix(in oklab, var(--accent) 6%, transparent) 1px,
      transparent 1px,
      transparent 22px
    ),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 68%, var(--bg)) 100%);
}

.landing-scene-feature-trace {
  background:
    radial-gradient(120% 120% at 88% 8%, color-mix(in oklab, var(--accent-2) 10%, transparent), transparent 62%),
    repeating-linear-gradient(
      to bottom,
      color-mix(in oklab, var(--accent) 5%, transparent) 0,
      color-mix(in oklab, var(--accent) 5%, transparent) 1px,
      transparent 1px,
      transparent 26px
    ),
    repeating-linear-gradient(
      to right,
      color-mix(in oklab, var(--accent-2) 4%, transparent) 0,
      color-mix(in oklab, var(--accent-2) 4%, transparent) 1px,
      transparent 1px,
      transparent 26px
    ),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 70%, var(--bg)) 100%);
}

.landing-scene-feature-contract {
  background:
    radial-gradient(120% 120% at 14% 14%, color-mix(in oklab, var(--accent) 9%, transparent), transparent 62%),
    repeating-linear-gradient(
      135deg,
      color-mix(in oklab, var(--accent-2) 6%, transparent) 0,
      color-mix(in oklab, var(--accent-2) 6%, transparent) 2px,
      transparent 2px,
      transparent 16px
    ),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 72%, var(--bg)) 100%);
}

.landing-scene-how {
  background:
    radial-gradient(120% 120% at 10% 0%, color-mix(in oklab, var(--accent) 8%, transparent), transparent 62%),
    radial-gradient(120% 120% at 92% 18%, color-mix(in oklab, var(--accent-2) 7%, transparent), transparent 64%),
    repeating-linear-gradient(
      to bottom,
      color-mix(in oklab, var(--border) 18%, transparent) 0,
      color-mix(in oklab, var(--border) 18%, transparent) 1px,
      transparent 1px,
      transparent 34px
    ),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 72%, var(--bg)) 100%);
}

.landing-scene-use {
  background:
    radial-gradient(130% 120% at 22% 0%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 62%),
    radial-gradient(120% 120% at 84% 20%, color-mix(in oklab, var(--accent-2) 8%, transparent), transparent 64%),
    repeating-linear-gradient(
      45deg,
      color-mix(in oklab, var(--accent) 6%, transparent) 0,
      color-mix(in oklab, var(--accent) 6%, transparent) 1px,
      transparent 1px,
      transparent 20px
    ),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 70%, var(--bg)) 100%);
}

.landing-scene-faq {
  background:
    radial-gradient(120% 120% at 12% 16%, color-mix(in oklab, var(--accent-2) 8%, transparent), transparent 66%),
    radial-gradient(120% 120% at 92% 10%, color-mix(in oklab, var(--accent) 8%, transparent), transparent 66%),
    radial-gradient(140% 90% at 50% 110%, color-mix(in oklab, var(--bg) 60%, transparent), transparent 70%),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 74%, var(--bg)) 100%);
}

.landing-scene-close {
  background:
    radial-gradient(140% 120% at 20% 0%, color-mix(in oklab, var(--accent) 11%, transparent), transparent 60%),
    radial-gradient(120% 120% at 86% 18%, color-mix(in oklab, var(--accent-2) 10%, transparent), transparent 64%),
    radial-gradient(90% 70% at 50% 110%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 72%),
    linear-gradient(to bottom, var(--bg) 0%, color-mix(in oklab, var(--surface-3) 72%, var(--bg)) 100%);
}

/* Landing: editorial text block with a rail + aura (less "card/pill"). */
.landing-text-rail {
  isolation: isolate;
  padding-left: 1.5rem;
}

.landing-text-rail::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0.35rem;
  bottom: 0.35rem;
  width: 1px;
  background:
    linear-gradient(
      to bottom,
      transparent 0%,
      color-mix(in oklab, var(--accent) 38%, transparent) 18%,
      color-mix(in oklab, var(--accent-2) 24%, transparent) 52%,
      color-mix(in oklab, var(--accent) 34%, transparent) 82%,
      transparent 100%
    );
  opacity: 0.75;
  pointer-events: none;
}

.landing-text-rail::after {
  content: "";
  position: absolute;
  left: -3.5rem;
  top: -4rem;
  width: 34rem;
  height: 34rem;
  background:
    radial-gradient(closest-side at 50% 40%, color-mix(in oklab, var(--accent) 18%, transparent) 0%, transparent 62%),
    radial-gradient(closest-side at 35% 70%, color-mix(in oklab, var(--accent-2) 12%, transparent) 0%, transparent 64%);
  opacity: 0.55;
  filter: blur(10px);
  z-index: -1;
  pointer-events: none;
}

/* Subtle HUD grid overlay for framed surfaces. */
.hud-grid {
  background-image:
    linear-gradient(to right, color-mix(in oklab, var(--accent) 7%, transparent) 1px, transparent 1px),
    linear-gradient(to bottom, color-mix(in oklab, var(--accent) 5%, transparent) 1px, transparent 1px),
    radial-gradient(120% 90% at 50% 0%, color-mix(in oklab, var(--accent) 14%, transparent), transparent 58%);
  background-size: 36px 36px, 36px 36px, auto;
  background-position: 0 0, 0 0, 50% 0;
}

.app-bg-slot {
  position: absolute;
  inset: 0;
  z-index: 1;
}

.app-bg-vignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(140% 100% at 50% 0%, transparent 50%, color-mix(in oklab, var(--bg) 34%, transparent) 86%),
    radial-gradient(140% 120% at 50% 105%, color-mix(in oklab, var(--bg) 48%, transparent) 0%, transparent 52%);
  z-index: 2;
}

.app-bg-canvas {
  position: absolute;
  inset: -5vh -5vw;
  width: 110vw;
  height: 110vh;
  pointer-events: none;
}

.app-bg-landing-stack {
  position: absolute;
  inset: -5vh -5vw;
  width: 110vw;
  height: 110vh;
  pointer-events: none;
  overflow: hidden;
  background: #000;
}

.app-bg-landing-stack::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  background:
    radial-gradient(130% 100% at 50% 0%, transparent 48%, rgba(0, 0, 0, 0.5) 100%),
    radial-gradient(160% 120% at 50% 112%, rgba(0, 0, 0, 0.48) 0%, transparent 52%);
}

.app-bg-landing-slot {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.app-bg-landing-cells {
  opacity: 0.9;
}

.app-bg-webgl,
.app-bg-canvas canvas {
  display: block;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none;
}

.app-bg::before,
.app-bg::after {
  content: "";
  position: fixed;
  inset: -10vh -10vw;
  pointer-events: none;
  z-index: 0;
}

.app-bg::before {
  background:
    radial-gradient(820px 460px at 12% 10%, color-mix(in oklab, var(--accent) 19%, transparent), transparent 58%),
    radial-gradient(780px 420px at 86% 12%, color-mix(in oklab, var(--accent-2) 13%, transparent), transparent 62%);
  filter: blur(36px);
  opacity: 0.62;
  transform: translate3d(0, 0, 0);
  animation: bloom-float 14s ease-in-out infinite;
}

.app-bg::after {
  background:
    linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 0%, transparent 28%, rgba(0, 0, 0, 0.58) 100%),
    linear-gradient(to right, color-mix(in oklab, var(--accent) 7%, transparent) 1px, transparent 1px),
    linear-gradient(to bottom, color-mix(in oklab, var(--accent) 4%, transparent) 1px, transparent 1px);
  background-size: auto, 38px 38px, 38px 38px;
  opacity: 0.52;
}

.app-bg-dynamic::after {
  opacity: 0.015;
}

.app-bg-dynamic::before {
  opacity: 0.16;
  filter: blur(48px);
}

@keyframes bloom-float {
  0% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    transform: translate3d(0, -12px, 0) scale(1.015);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes reveal-up {
  0% {
    opacity: 0;
    transform: translateY(8px);
    filter: blur(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

.reveal-up {
  animation: reveal-up 640ms cubic-bezier(0.22, 1, 0.36, 1) both;
}

.section-label {
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  font-size: 0.67rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--muted-fg);
}

.section-label::before {
  content: "";
  width: 1.5rem;
  height: 1px;
  background: color-mix(in oklab, var(--accent) 30%, var(--border));
}

/* ── Opaque panels (used inside the app, where bg is always the halo) ── */
.panel-elevated {
  background: color-mix(in oklab, var(--surface-1) 72%, transparent);
  border: 1px solid color-mix(in oklab, var(--accent) 22%, var(--border-strong));
  box-shadow: var(--shadow-elevated);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.panel-muted {
  background: color-mix(in oklab, var(--surface-3) 55%, transparent);
  border: 1px solid color-mix(in oklab, var(--accent) 14%, var(--border-soft));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* ── Landing glass panel (hero sidebar etc.) ── */
.panel-glass {
  background: color-mix(in oklab, var(--surface-2) 22%, transparent);
  border: 1px solid color-mix(in oklab, var(--accent) 28%, var(--border-soft));
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--accent) 8%, transparent),
    var(--shadow-soft);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

/* ── General landing glass panel (bigger blur, softer edges) ── */
.glass-panel {
  background:
    radial-gradient(120% 110% at 50% 0%, color-mix(in oklab, var(--bg) 52%, transparent) 0%, transparent 60%),
    color-mix(in oklab, var(--surface-2) 22%, transparent);
  border: 1px solid color-mix(in oklab, white 16%, transparent);
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--accent) 10%, transparent),
    0 28px 64px -22px rgba(0, 0, 0, 0.78);
  backdrop-filter: blur(30px) saturate(175%);
  -webkit-backdrop-filter: blur(30px) saturate(175%);
}

/* ── Hero readability scrim (darkens left side without killing the galaxy) ── */
.landing-hero-scrim {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(90% 80% at 12% 38%, color-mix(in oklab, var(--bg) 88%, transparent) 0%, transparent 60%),
    linear-gradient(
      to right,
      color-mix(in oklab, var(--bg) 92%, transparent) 0%,
      color-mix(in oklab, var(--bg) 82%, transparent) 34%,
      color-mix(in oklab, var(--bg) 40%, transparent) 58%,
      transparent 72%
    );
}

/* ── Cycle background button ── */
.landing-cycle-btn {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  z-index: 40;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 6rem;
  height: 2rem;
  padding: 0 0.75rem;
  overflow: hidden;
  border-radius: 999px;
  border: 1px solid color-mix(in oklab, var(--accent) 30%, var(--border-soft));
  background: color-mix(in oklab, var(--surface-2) 28%, transparent);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  color: color-mix(in oklab, var(--accent) 90%, var(--fg));
  font-size: 0.68rem;
  font-weight: 500;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
  box-shadow: 0 2px 12px -4px color-mix(in oklab, var(--accent) 22%, transparent);
}

.landing-cycle-btn:hover {
  border-color: color-mix(in oklab, var(--accent) 56%, var(--border-soft));
  background: color-mix(in oklab, var(--surface-2) 45%, transparent);
  box-shadow: 0 4px 18px -4px color-mix(in oklab, var(--accent) 36%, transparent);
}

.landing-cycle-btn:active {
  scale: 0.97;
}

.hairline {
  border-top: 1px solid color-mix(in oklab, var(--border) 78%, transparent);
}

@keyframes accordion-down {
  from {
    height: 0;
    opacity: 0.6;
  }
  to {
    height: var(--radix-accordion-content-height);
    opacity: 1;
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
    opacity: 1;
  }
  to {
    height: 0;
    opacity: 0.4;
  }
}

@keyframes tab-content-in {
  from {
    opacity: 0;
    transform: translateY(6px);
    filter: blur(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

/* ── Shine card — animated iridescent conic-gradient border ── */
@property --shine-angle {
  syntax: "<angle>";
  inherits: false;
  initial-value: 0deg;
}

@keyframes shine-rotate {
  to {
    --shine-angle: 360deg;
  }
}

.shine-card {
  position: relative;
  background: color-mix(in oklab, var(--surface-2) 13%, transparent);
  backdrop-filter: blur(32px) saturate(180%);
  -webkit-backdrop-filter: blur(32px) saturate(180%);
  box-shadow:
    inset 0 1px 0 color-mix(in oklab, white 8%, transparent),
    0 32px 72px -20px rgba(0, 0, 0, 0.7);
  isolation: isolate;
}

.shine-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: conic-gradient(
    from var(--shine-angle),
    transparent 0%,
    color-mix(in oklab, var(--accent) 82%, white) 20%,
    color-mix(in oklab, var(--accent-2) 82%, white) 46%,
    transparent 66%,
    transparent 100%
  );
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask-composite: xor;
  animation: shine-rotate 6s linear infinite;
  pointer-events: none;
}

/* ── Landing cutscene utilities ── */

@keyframes landing-scanline {
  0% {
    background-position: 0 -60px, 0 0;
  }
  100% {
    background-position: 0 60px, 0 0;
  }
}

.landing-scanline {
  border-radius: inherit;
  background-image:
    linear-gradient(to bottom, transparent 0%, rgba(255, 255, 255, 0.07) 46%, transparent 72%),
    repeating-linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 0 1px, transparent 1px 10px);
  opacity: 0.22;
  mix-blend-mode: screen;
  animation: landing-scanline 1.05s linear infinite;
}

/* ── Landing section dividers ── */
.landing-divider {
  border-top: 1px solid color-mix(in oklab, var(--border) 36%, transparent);
}

/* ── Non-hero section readability scrim (frosted glass — keeps galaxy visible) ── */
.landing-section-scrim {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background: color-mix(in oklab, var(--bg) 38%, transparent);
  backdrop-filter: blur(20px) saturate(140%);
  -webkit-backdrop-filter: blur(20px) saturate(140%);
}

@media (prefers-reduced-motion: reduce) {
  .app-bg::before {
    animation: none;
  }

  .reveal-up {
    animation: none;
  }

  .shine-card::before {
    animation: none;
  }

  .landing-scanline {
    animation: none;
  }
}
