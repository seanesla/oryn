@import "tailwindcss";

:root {
  color-scheme: dark;

  --bg: #0a0c11;
  --fg: #f0f3fb;
  --muted: #121720;
  --muted-fg: #a9b3c7;
  --card: #111722;
  --card-2: #0f141f;
  --surface-1: #10151f;
  --surface-2: #0e131d;
  --surface-3: #0c1018;
  --border: #232c3d;
  --border-soft: #1c2433;
  --border-strong: #2d3850;

  --accent: #7e9cff;
  --accent-2: #8edac8;
  --good: #8edac8;
  --warn: #d8b57f;
  --bad: #f198ab;
  --ring: #7e9cff;

  --radius-sm: 0.56rem;
  --radius-lg: 0.92rem;

  --shadow-ambient: 0 10px 30px -26px rgba(0, 0, 0, 0.84);
  --shadow-soft: 0 16px 52px -36px rgba(0, 0, 0, 0.92);
  --shadow-elevated: 0 30px 72px -48px rgba(0, 0, 0, 0.98);
  --shadow-glow: 0 0 0 1px color-mix(in oklab, var(--accent) 26%, transparent),
    0 14px 36px -26px color-mix(in oklab, var(--accent) 40%, transparent);
  --shadow-focus: 0 0 0 1px color-mix(in oklab, var(--accent) 35%, transparent),
    0 0 0 4px color-mix(in oklab, var(--accent) 18%, transparent);
}

@theme inline {
  --color-bg: var(--bg);
  --color-fg: var(--fg);
  --color-muted: var(--muted);
  --color-muted-fg: var(--muted-fg);
  --color-card: var(--card);
  --color-card-2: var(--card-2);
  --color-border: var(--border);
  --color-accent: var(--accent);
  --color-accent-2: var(--accent-2);
  --color-good: var(--good);
  --color-warn: var(--warn);
  --color-bad: var(--bad);
  --color-ring: var(--ring);
  --font-sans: var(--font-app-sans);
  --font-serif: var(--font-app-serif);

  --animate-aurora: aurora 60s linear infinite;

  @keyframes aurora {
    from {
      background-position: 50% 50%, 50% 50%;
    }
    to {
      background-position: 350% 50%, 350% 50%;
    }
  }
}

@supports (color: oklch(8% 0.01 60)) {
  :root {
    --bg: oklch(14% 0.015 258);
    --fg: oklch(95% 0.01 260);
    --muted: oklch(19% 0.018 258);
    --muted-fg: oklch(77% 0.03 257);
    --card: oklch(20% 0.02 258);
    --card-2: oklch(18% 0.018 258);
    --surface-1: oklch(21% 0.018 258);
    --surface-2: oklch(19% 0.018 258);
    --surface-3: oklch(17% 0.016 258);
    --border: oklch(31% 0.028 257);
    --border-soft: oklch(27% 0.022 257);
    --border-strong: oklch(37% 0.036 257);

    --accent: oklch(71% 0.16 269);
    --accent-2: oklch(80% 0.09 185);
    --good: oklch(80% 0.09 185);
    --warn: oklch(80% 0.09 85);
    --bad: oklch(73% 0.12 14);
    --ring: oklch(71% 0.16 269);
  }
}

* {
  box-sizing: border-box;
}

html,
body {
  min-height: 100%;
}

html {
  position: relative;
}

body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--font-app-sans), ui-sans-serif, system-ui, -apple-system,
    BlinkMacSystemFont, "Segoe UI", sans-serif;
  overflow-x: hidden;
  text-rendering: optimizeLegibility;
}

::selection {
  background: color-mix(in oklab, var(--accent) 32%, transparent);
}

.app-bg {
  position: relative;
  min-height: 100vh;
  isolation: isolate;
}

.app-bg-layer {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}

/* Legacy landing background slot (AnimatedBackground landingMode).
   The current / landing uses `LandingStickyBackgroundStage` instead. */
.app-bg-layer-landing {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: auto;
  height: 100vh;
}

/* Lenis smooth scroll (landing only). */
html.lenis,
html.lenis body {
  height: auto;
  scroll-behavior: auto;
}

/* Lenis sets overflow:clip when stopped — we override to auto so native
   scrolling takes over as a fallback if the GSAP↔Lenis bridge stalls.
   Without this, any momentary Lenis "stop" (tab backgrounded, heavy
   frame, initialisation race) completely locks scrolling. */
.lenis:not(.lenis-autoToggle).lenis-stopped {
  overflow: auto;
}

.lenis [data-lenis-prevent],
.lenis [data-lenis-prevent-wheel],
.lenis [data-lenis-prevent-touch] {
  overscroll-behavior: contain;
}

.lenis.lenis-smooth iframe {
  pointer-events: none;
}

.lenis.lenis-autoToggle {
  transition-property: overflow;
  transition-duration: 1ms;
  transition-behavior: allow-discrete;
}

.landing-scene {
  min-height: 100vh;
  position: relative;
  isolation: isolate;
}

/*
 * GSAP inserts `.pin-spacer` wrappers for pinned sections.
 * On some displays subpixel rounding can reveal faint seams at spacer edges
 * while pinned elements are transformed. Clipping the spacer keeps the
 * landing flow visually continuous.
 */
.pin-spacer {
  overflow: hidden;
}

/* Subtle readability veil over the sticky cosmic stage (neutral, no accent gradients). */
.landing-scene-solid {
  background: color-mix(in oklab, var(--bg) 18%, transparent);
}

.landing-bg-stage {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.landing-bg-scene {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  will-change: opacity, transform;
}

.split-line-mask {
  display: block;
  overflow: hidden;
}

/* ── Creative landing typography & layout ── */

.text-gradient {
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.text-gradient-reverse {
  background: linear-gradient(135deg, var(--accent-2), var(--accent));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Animated shimmer that sweeps across gradient text */
@keyframes gradient-shimmer {
  0%   { background-position: 0% center; }
  100% { background-position: 200% center; }
}

.text-gradient-shimmer {
  background: linear-gradient(
    90deg,
    var(--accent) 0%,
    var(--accent-2) 25%,
    #fff 50%,
    var(--accent-2) 75%,
    var(--accent) 100%
  );
  background-size: 200% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: gradient-shimmer 5s ease-in-out infinite;
}

/* Subtle readability darkening behind open-canvas text (not a visible box) */
.landing-section-scrim {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(65% 55% at 32% 42%, color-mix(in oklab, var(--bg) 78%, transparent), transparent 72%),
    radial-gradient(50% 40% at 70% 65%, color-mix(in oklab, var(--bg) 52%, transparent), transparent 64%);
}

/* Step number outline-only text */
.step-num-outline {
  -webkit-text-stroke: 1.5px color-mix(in oklab, var(--accent) 48%, transparent);
  -webkit-text-fill-color: transparent;
  line-height: 0.85;
}

/* SVG timeline drawing line */
.step-draw-line {
  stroke: color-mix(in oklab, var(--accent) 35%, transparent);
  stroke-width: 1.5;
  stroke-linecap: round;
}

/* Accent left-border block (replaces cards for quoted content) */
.accent-border-block {
  border-left: 2px solid color-mix(in oklab, var(--accent) 40%, transparent);
  padding-left: 1rem;
}

.accent-border-block-2 {
  border-left: 2px solid color-mix(in oklab, var(--accent-2) 40%, transparent);
  padding-left: 1rem;
}

/* Use-case nav sliding indicator */
.use-nav-item {
  position: relative;
  padding-bottom: 0.5rem;
  cursor: pointer;
}
.use-nav-item::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  border-radius: 1px;
  background: var(--accent);
  transform: scaleX(0);
  transition: transform 0.3s cubic-bezier(0.22, 1, 0.36, 1);
}
.use-nav-item[data-active="true"]::after {
  transform: scaleX(1);
}

.landing-bg-stage-vignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(120% 90% at 50% -8%, transparent 28%, color-mix(in oklab, var(--bg) 38%, transparent) 88%),
    radial-gradient(120% 120% at 50% 112%, color-mix(in oklab, var(--bg) 52%, transparent) 0%, transparent 54%);
}

.landing-bg-stage-grain {
  position: absolute;
  inset: 0;
  opacity: 0.14;
  background:
    repeating-linear-gradient(
      90deg,
      rgba(255, 255, 255, 0.025) 0 1px,
      rgba(0, 0, 0, 0.025) 1px 2px,
      transparent 2px 4px
    ),
    repeating-linear-gradient(
      0deg,
      rgba(255, 255, 255, 0.02) 0 1px,
      transparent 1px 3px
    );
  mix-blend-mode: soft-light;
  animation: landing-bg-grain-shift 8s steps(12) infinite;
}



@keyframes landing-bg-grain-shift {
  0% {
    transform: translate3d(0, 0, 0);
  }
  25% {
    transform: translate3d(-1.2%, 0.9%, 0);
  }
  50% {
    transform: translate3d(0.8%, -1.1%, 0);
  }
  75% {
    transform: translate3d(-0.6%, -0.8%, 0);
  }
  100% {
    transform: translate3d(0, 0, 0);
  }
}



.app-bg-slot {
  position: absolute;
  inset: 0;
  z-index: 1;
}

.app-bg-vignette {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(140% 100% at 50% 0%, transparent 50%, color-mix(in oklab, var(--bg) 34%, transparent) 86%),
    radial-gradient(140% 120% at 50% 105%, color-mix(in oklab, var(--bg) 48%, transparent) 0%, transparent 52%);
  z-index: 2;
}

.app-bg-canvas {
  position: absolute;
  inset: -5vh -5vw;
  width: 110vw;
  height: 110vh;
  pointer-events: none;
}

.app-bg-landing-stack {
  position: absolute;
  inset: -5vh -5vw;
  width: 110vw;
  height: 110vh;
  pointer-events: none;
  overflow: hidden;
  background: #000;
}

.app-bg-landing-stack::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  background:
    radial-gradient(130% 100% at 50% 0%, transparent 48%, rgba(0, 0, 0, 0.5) 100%),
    radial-gradient(160% 120% at 50% 112%, rgba(0, 0, 0, 0.48) 0%, transparent 52%);
}

.app-bg-landing-slot {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.app-bg-landing-cells {
  opacity: 0.9;
}

.app-bg-webgl,
.app-bg-canvas canvas {
  display: block;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none;
}

.app-bg::before,
.app-bg::after {
  content: "";
  position: fixed;
  inset: -10vh -10vw;
  pointer-events: none;
  z-index: 0;
}

.app-bg::before {
  background:
    radial-gradient(820px 460px at 12% 10%, color-mix(in oklab, var(--accent) 19%, transparent), transparent 58%),
    radial-gradient(780px 420px at 86% 12%, color-mix(in oklab, var(--accent-2) 13%, transparent), transparent 62%);
  filter: blur(36px);
  opacity: 0.62;
  transform: translate3d(0, 0, 0);
  animation: bloom-float 14s ease-in-out infinite;
}

.app-bg::after {
  background:
    linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 0%, transparent 28%, rgba(0, 0, 0, 0.58) 100%),
    linear-gradient(to right, color-mix(in oklab, var(--accent) 7%, transparent) 1px, transparent 1px),
    linear-gradient(to bottom, color-mix(in oklab, var(--accent) 4%, transparent) 1px, transparent 1px);
  background-size: auto, 38px 38px, 38px 38px;
  opacity: 0.52;
}

.app-bg-landing-page::before,
.app-bg-landing-page::after {
  display: none;
}

.app-bg-dynamic::after {
  opacity: 0.015;
}

.app-bg-dynamic::before {
  opacity: 0.16;
  filter: blur(48px);
}

@keyframes bloom-float {
  0% {
    transform: translate3d(0, 0, 0) scale(1);
  }
  50% {
    transform: translate3d(0, -12px, 0) scale(1.015);
  }
  100% {
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes reveal-up {
  0% {
    opacity: 0;
    transform: translateY(8px);
    filter: blur(8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

.reveal-up {
  animation: reveal-up 640ms cubic-bezier(0.22, 1, 0.36, 1) both;
}

.section-label {
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  font-size: 0.67rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--muted-fg);
}

.section-label::before {
  content: "";
  width: 1.5rem;
  height: 1px;
  background: color-mix(in oklab, var(--accent) 30%, var(--border));
}

/* ── Opaque panels (used inside the app, where bg is always the halo) ── */
.panel-elevated {
  background: color-mix(in oklab, var(--surface-1) 72%, transparent);
  border: 1px solid color-mix(in oklab, var(--accent) 22%, var(--border-strong));
  box-shadow: var(--shadow-elevated);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.panel-muted {
  background: color-mix(in oklab, var(--surface-3) 55%, transparent);
  border: 1px solid color-mix(in oklab, var(--accent) 14%, var(--border-soft));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

/* ── Landing glass panel (hero sidebar etc.) ── */
.panel-glass {
  background: color-mix(in oklab, var(--surface-2) 22%, transparent);
  border: 1px solid color-mix(in oklab, var(--accent) 28%, var(--border-soft));
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--accent) 8%, transparent),
    var(--shadow-soft);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

/* ── General landing glass panel (bigger blur, softer edges) ── */
.glass-panel {
  background:
    radial-gradient(120% 110% at 50% 0%, color-mix(in oklab, var(--bg) 52%, transparent) 0%, transparent 60%),
    color-mix(in oklab, var(--surface-2) 22%, transparent);
  border: 1px solid color-mix(in oklab, white 16%, transparent);
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--accent) 10%, transparent),
    0 28px 64px -22px rgba(0, 0, 0, 0.78);
  backdrop-filter: blur(30px) saturate(175%);
  -webkit-backdrop-filter: blur(30px) saturate(175%);
}

/* (hero scrim removed — galaxy background provides natural contrast for centered text) */

/* ── Cycle background button ── */
.landing-cycle-btn {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  z-index: 40;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 6rem;
  height: 2rem;
  padding: 0 0.75rem;
  overflow: hidden;
  border-radius: 999px;
  border: 1px solid color-mix(in oklab, var(--accent) 30%, var(--border-soft));
  background: color-mix(in oklab, var(--surface-2) 28%, transparent);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  color: color-mix(in oklab, var(--accent) 90%, var(--fg));
  font-size: 0.68rem;
  font-weight: 500;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
  box-shadow: 0 2px 12px -4px color-mix(in oklab, var(--accent) 22%, transparent);
}

.landing-cycle-btn:hover {
  border-color: color-mix(in oklab, var(--accent) 56%, var(--border-soft));
  background: color-mix(in oklab, var(--surface-2) 45%, transparent);
  box-shadow: 0 4px 18px -4px color-mix(in oklab, var(--accent) 36%, transparent);
}

.landing-cycle-btn:active {
  scale: 0.97;
}

.hairline {
  border-top: 1px solid color-mix(in oklab, var(--border) 78%, transparent);
}

@keyframes accordion-down {
  from {
    height: 0;
    opacity: 0.6;
  }
  to {
    height: var(--radix-accordion-content-height);
    opacity: 1;
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
    opacity: 1;
  }
  to {
    height: 0;
    opacity: 0.4;
  }
}

@keyframes tab-content-in {
  from {
    opacity: 0;
    transform: translateY(6px);
    filter: blur(6px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }
}

/* ── Shine card — animated iridescent conic-gradient border ── */
@property --shine-angle {
  syntax: "<angle>";
  inherits: false;
  initial-value: 0deg;
}

@keyframes shine-rotate {
  to {
    --shine-angle: 360deg;
  }
}

.shine-card {
  position: relative;
  background: color-mix(in oklab, var(--surface-2) 13%, transparent);
  backdrop-filter: blur(32px) saturate(180%);
  -webkit-backdrop-filter: blur(32px) saturate(180%);
  box-shadow:
    inset 0 1px 0 color-mix(in oklab, white 8%, transparent),
    0 32px 72px -20px rgba(0, 0, 0, 0.7);
  isolation: isolate;
}

.shine-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: conic-gradient(
    from var(--shine-angle),
    transparent 0%,
    color-mix(in oklab, var(--accent) 82%, white) 20%,
    color-mix(in oklab, var(--accent-2) 82%, white) 46%,
    transparent 66%,
    transparent 100%
  );
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask-composite: xor;
  animation: shine-rotate 6s linear infinite;
  pointer-events: none;
}



@media (prefers-reduced-motion: reduce) {
  .app-bg::before {
    animation: none;
  }

  .reveal-up {
    animation: none;
  }

  .shine-card::before {
    animation: none;
  }

  .landing-bg-stage-grain {
    animation: none;
  }

  /* Disable tab content entrance animation (Radix TabsContent) */
  [data-radix-collection-item][data-state="active"],
  [role="tabpanel"][data-state="active"] {
    animation: none !important;
  }
}
